# ===============================================================================
#
# Copyright (c) 2013, Lawrence Livermore National Security, LLC.
# Produced at the Lawrence Livermore National Laboratory.
# Written by Jeff Long <long6@llnl.gov>, et. al.
# LLNL-CODE-640252
#
# This file is part of Lorenz.
#
# This program is free software; you can redistribute it and/or modify it
# under the terms of the GNU General Public License (as published by the
# Free Software Foundation) version 2, dated June 1991.
#
# This program is distributed in the hope that it will be useful, but WITHOUT
# ANY WARRANTY; without even the IMPLIED WARRANTY OF
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# terms and conditions of the GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software Foundation,
# Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
#
# ===============================================================================

package Lorenz::CpuUsage;

#===============================================================================
#									CpuUsage.pm
#-------------------------------------------------------------------------------
#  Purpose:		Cpu usage methods (native)
#  Author:		Jeff Long
#  Notes:
#
#===============================================================================

use strict;
use JSON;
use Time::Local;
use Date::Parse;
use Date::Format;
use Date::Manip;
use File::Path qw(mkpath rmtree);
use File::Basename;
use Lorenz::Base;
use Lorenz::System;
use Lorenz::User;

use vars qw(@ISA);
@ISA = ("Lorenz::Base");

my %conf = Lorenz::Config::getLorenzConfig();

# Cache user's cluster list
my @myClusters = Lorenz::Cluster->getUserClusters(Lorenz::User->getUsername());


# ($aref,$error) = getUsersDailyCpuUsage()

sub getUsersDailyCpuUsage {
	my ($self,$user) = @_;

	my @objs;

	return (\@objs, "");
}

sub getClusterUtilization {
	my ($self,$period,$dir,$timeformat,$ndays,@clusters,) = @_;

	my @objs=();

	foreach my $cluster (@clusters) {
		my $obj = $self->_generateClusterUtilization($cluster, $period, $dir, $timeformat, $ndays) ||
			return ("","problem getting cluster usage from dir: $dir for cluster: $cluster");

		push @objs, $obj;
	}
	return (\@objs,"");
}

sub _generateClusterUtilization {
	my ($self,$cluster,$period,$dir,$timeformat,$ndays) = @_;
	# period = daily | hourly; timeformat = utc|local|epoch

	my $obj;

	return $obj;
}

# json = getClusterUtilization2 (period)

sub getClusterUtilization2 {
	my ($self,$period) = @_;

	my $out=<<'EOF';
[
   {
      "history" : {
         "1361689199000" : "0.98",
         "1361692799000" : "0.94",
         "1361696399000" : "0.95",
         "1361699999000" : "0.92",
         "1361703599000" : "0.88",
         "1361707199000" : "0.87",
         "1361710799000" : "0.81",
         "1361714399000" : "0.75",
         "1361717999000" : "0.73",
         "1361721599000" : "0.66",
         "1361725199000" : "0.60",
         "1361728799000" : "0.49",
         "1361732399000" : "0.58",
         "1361735999000" : "0.62",
         "1361739599000" : "0.63",
         "1361743199000" : "0.54",
         "1361746799000" : "0.52",
         "1361750399000" : "0.62",
         "1361753999000" : "0.73",
         "1361757599000" : "0.92",
         "1361761199000" : "0.96",
         "1361764799000" : "0.92",
         "1361768399000" : "0.82",
         "1361771999000" : "0.90",
         "1361775599000" : "0.98",
         "1361779199000" : "0.92",
         "1361782799000" : "0.85",
         "1361786399000" : "0.86",
         "1361789999000" : "0.77",
         "1361793599000" : "0.71",
         "1361797199000" : "0.76",
         "1361800799000" : "0.92",
         "1361804399000" : "0.93",
         "1361807999000" : "0.95",
         "1361811599000" : "0.94",
         "1361815199000" : "0.94",
         "1361818799000" : "0.95",
         "1361822399000" : "0.93",
         "1361825999000" : "0.95",
         "1361829599000" : "0.96",
         "1361833199000" : "0.97",
         "1361836799000" : "0.99",
         "1361840399000" : "0.98",
         "1361843999000" : "0.95",
         "1361847599000" : "0.95",
         "1361851199000" : "0.95",
         "1361854799000" : "0.92",
         "1361858399000" : "0.94",
         "1361861999000" : "0.96",
         "1361865599000" : "0.95",
         "1361869199000" : "0.96",
         "1361872799000" : "0.91",
         "1361876399000" : "0.92",
         "1361879999000" : "0.92",
         "1361883599000" : "0.91",
         "1361887199000" : "0.92",
         "1361890799000" : "0.92",
         "1361894399000" : "0.89",
         "1361897999000" : "0.93",
         "1361901599000" : "0.95",
         "1361905199000" : "0.97",
         "1361908799000" : "0.96",
         "1361912399000" : "0.99",
         "1361915999000" : "0.97",
         "1361919599000" : "0.95",
         "1361923199000" : "0.98",
         "1361926799000" : "0.96",
         "1361930399000" : "0.87",
         "1361933999000" : "0.92",
         "1361937599000" : "0.92",
         "1361941199000" : "0.97",
         "1361944799000" : "0.96",
         "1361948399000" : "0.96",
         "1361951999000" : "0.95",
         "1361955599000" : "0.91",
         "1361959199000" : "0.93",
         "1361962799000" : "0.92",
         "1361966399000" : "0.92",
         "1361969999000" : "0.94",
         "1361973599000" : "0.93",
         "1361977199000" : "0.93",
         "1361980799000" : "0.93",
         "1361984399000" : "0.93",
         "1361987999000" : "0.96",
         "1361991599000" : "0.97",
         "1361995199000" : "0.98",
         "1361998799000" : "0.97",
         "1362002399000" : "0.97",
         "1362005999000" : "0.96",
         "1362009599000" : "0.96",
         "1362013199000" : "0.96",
         "1362016799000" : "0.94",
         "1362020399000" : "0.94",
         "1362023999000" : "0.92",
         "1362027599000" : "0.94",
         "1362031199000" : "0.94",
         "1362034799000" : "0.92",
         "1362038399000" : "0.97",
         "1362041999000" : "0.97",
         "1362045599000" : "0.99",
         "1362049199000" : "0.96",
         "1362052799000" : "0.96",
         "1362056399000" : "0.97",
         "1362059999000" : "0.99",
         "1362063599000" : "0.99",
         "1362067199000" : "0.99",
         "1362070799000" : "0.95",
         "1362074399000" : "0.97",
         "1362077999000" : "0.95",
         "1362081599000" : "0.95",
         "1362085199000" : "0.94",
         "1362088799000" : "0.96",
         "1362092399000" : "0.98",
         "1362095999000" : "0.97",
         "1362099599000" : "0.97",
         "1362103199000" : "0.96",
         "1362106799000" : "0.96",
         "1362110399000" : "0.95",
         "1362113999000" : "0.96",
         "1362117599000" : "0.97",
         "1362121199000" : "0.97",
         "1362124799000" : "0.96",
         "1362128399000" : "0.98",
         "1362131999000" : "0.94",
         "1362135599000" : "0.95",
         "1362139199000" : "0.95",
         "1362142799000" : "0.94",
         "1362146399000" : "0.94",
         "1362149999000" : "0.94",
         "1362153599000" : "0.96",
         "1362157199000" : "0.98",
         "1362160799000" : "0.97",
         "1362164399000" : "0.93",
         "1362167999000" : "0.97",
         "1362171599000" : "0.99",
         "1362175199000" : "0.97",
         "1362178799000" : "0.96",
         "1362182399000" : "0.96",
         "1362185999000" : "0.92",
         "1362189599000" : "0.95",
         "1362193199000" : "0.96",
         "1362196799000" : "0.97",
         "1362200399000" : "0.96",
         "1362203999000" : "0.93",
         "1362207599000" : "0.93",
         "1362211199000" : "0.96",
         "1362214799000" : "0.98",
         "1362218399000" : "0.96",
         "1362221999000" : "0.97",
         "1362225599000" : "0.97",
         "1362229199000" : "0.95",
         "1362232799000" : "0.95",
         "1362236399000" : "0.94",
         "1362239999000" : "0.94",
         "1362243599000" : "0.95",
         "1362247199000" : "0.99",
         "1362250799000" : "0.99",
         "1362254399000" : "0.99",
         "1362257999000" : "0.94",
         "1362261599000" : "0.94",
         "1362265199000" : "0.95",
         "1362268799000" : "0.94",
         "1362272399000" : "0.93",
         "1362275999000" : "0.94",
         "1362279599000" : "0.94",
         "1362283199000" : "0.91",
         "1362286799000" : "0.94",
         "1362290399000" : "0.99",
         "1362293999000" : "0.95",
         "1362297599000" : "0.95",
         "1362301199000" : "0.94",
         "1362304799000" : "0.92",
         "1362308399000" : "0.96",
         "1362311999000" : "0.95",
         "1362315599000" : "0.93",
         "1362319199000" : "0.91",
         "1362322799000" : "0.81",
         "1362326399000" : "0.82",
         "1362329999000" : "0.89",
         "1362333599000" : "0.75",
         "1362337199000" : "0.72",
         "1362340799000" : "0.73",
         "1362344399000" : "0.77",
         "1362347999000" : "0.71",
         "1362351599000" : "0.81",
         "1362355199000" : "0.92",
         "1362358799000" : "0.94",
         "1362362399000" : "0.93",
         "1362365999000" : "0.93",
         "1362369599000" : "0.91",
         "1362373199000" : "0.90",
         "1362376799000" : "0.93",
         "1362380399000" : "0.98",
         "1362383999000" : "0.93",
         "1362387599000" : "0.92",
         "1362391199000" : "0.90",
         "1362394799000" : "0.91",
         "1362398399000" : "0.93",
         "1362401999000" : "0.94",
         "1362405599000" : "0.94",
         "1362409199000" : "0.94",
         "1362412799000" : "0.93",
         "1362416399000" : "0.92",
         "1362419999000" : "0.93",
         "1362423599000" : "0.94",
         "1362427199000" : "0.94",
         "1362430799000" : "0.95",
         "1362434399000" : "0.95",
         "1362437999000" : "0.95",
         "1362441599000" : "0.94",
         "1362445199000" : "0.97",
         "1362448799000" : "0.95",
         "1362452399000" : "0.93",
         "1362455999000" : "0.97",
         "1362459599000" : "0.96",
         "1362463199000" : "0.93",
         "1362466799000" : "0.94",
         "1362470399000" : "0.98",
         "1362473999000" : "0.92",
         "1362477599000" : "0.91",
         "1362481199000" : "0.92",
         "1362484799000" : "0.94",
         "1362488399000" : "0.93",
         "1362491999000" : "0.91",
         "1362495599000" : "0.90",
         "1362499199000" : "0.94",
         "1362502799000" : "0.92",
         "1362506399000" : "0.91",
         "1362509999000" : "0.90",
         "1362513599000" : "0.95",
         "1362517199000" : "0.97",
         "1362520799000" : "0.98",
         "1362524399000" : "0.98",
         "1362527999000" : "0.97",
         "1362531599000" : "0.96",
         "1362535199000" : "0.94",
         "1362538799000" : "0.95",
         "1362542399000" : "0.93",
         "1362545999000" : "0.94",
         "1362549599000" : "0.92",
         "1362553199000" : "0.96",
         "1362556799000" : "0.96",
         "1362560399000" : "0.91",
         "1362563999000" : "0.93",
         "1362567599000" : "0.92",
         "1362571199000" : "0.94",
         "1362574799000" : "0.91",
         "1362578399000" : "0.93",
         "1362581999000" : "0.98",
         "1362585599000" : "0.95",
         "1362589199000" : "0.95",
         "1362592799000" : "0.95",
         "1362596399000" : "0.96",
         "1362599999000" : "0.89",
         "1362603599000" : "0.92",
         "1362607199000" : "0.94",
         "1362610799000" : "0.96",
         "1362614399000" : "0.99",
         "1362617999000" : "0.98",
         "1362621599000" : "0.95",
         "1362625199000" : "0.96",
         "1362628799000" : "0.97",
         "1362632399000" : "0.94",
         "1362635999000" : "0.96",
         "1362639599000" : "0.97",
         "1362643199000" : "0.96",
         "1362646799000" : "0.90",
         "1362650399000" : "0.91",
         "1362653999000" : "0.92",
         "1362657599000" : "0.94",
         "1362661199000" : "0.91",
         "1362664799000" : "0.95",
         "1362668399000" : "0.95",
         "1362671999000" : "0.95",
         "1362675599000" : "0.97",
         "1362679199000" : "0.99",
         "1362682799000" : "0.94",
         "1362686399000" : "0.98",
         "1362689999000" : "0.99",
         "1362693599000" : "0.98",
         "1362697199000" : "0.97",
         "1362700799000" : "0.98",
         "1362704399000" : "0.92",
         "1362707999000" : "0.93",
         "1362711599000" : "0.94",
         "1362715199000" : "0.96",
         "1362718799000" : "0.95",
         "1362722399000" : "0.96",
         "1362725999000" : "0.99",
         "1362729599000" : "0.98",
         "1362733199000" : "0.98",
         "1362736799000" : "0.98",
         "1362740399000" : "0.96",
         "1362743999000" : "0.93",
         "1362747599000" : "0.96",
         "1362751199000" : "0.92",
         "1362754799000" : "0.92",
         "1362758399000" : "0.96",
         "1362761999000" : "0.94",
         "1362765599000" : "0.93",
         "1362769199000" : "0.93",
         "1362772799000" : "0.94",
         "1362776399000" : "0.95",
         "1362779999000" : "0.94",
         "1362783599000" : "0.91",
         "1362787199000" : "0.95",
         "1362790799000" : "0.94",
         "1362794399000" : "0.96",
         "1362797999000" : "0.96",
         "1362801599000" : "0.96",
         "1362805199000" : "0.98",
         "1362808799000" : "0.95",
         "1362812399000" : "0.95",
         "1362815999000" : "0.97",
         "1362819599000" : "0.95",
         "1362823199000" : "0.96",
         "1362826799000" : "0.93",
         "1362830399000" : "0.92",
         "1362833999000" : "0.95",
         "1362837599000" : "0.96",
         "1362841199000" : "0.98",
         "1362844799000" : "0.98",
         "1362848399000" : "0.97",
         "1362851999000" : "0.97",
         "1362855599000" : "0.97",
         "1362859199000" : "0.95",
         "1362862799000" : "0.93",
         "1362866399000" : "0.95",
         "1362869999000" : "0.95",
         "1362873599000" : "0.97",
         "1362877199000" : "0.94",
         "1362880799000" : "0.92",
         "1362884399000" : "0.94",
         "1362887999000" : "0.94",
         "1362891599000" : "0.94"
      },
      "host" : "hosta",
      "last_update" : "2013-03-09 21:03:23",
      "last_update_ms" : 1362891803000
   },
   {
      "history" : {
         "1361689199000" : "0.90",
         "1361692799000" : "0.90",
         "1361696399000" : "0.89",
         "1361699999000" : "0.89",
         "1361703599000" : "0.88",
         "1361707199000" : "0.87",
         "1361710799000" : "0.87",
         "1361714399000" : "0.87",
         "1361717999000" : "0.86",
         "1361721599000" : "0.86",
         "1361725199000" : "0.86",
         "1361728799000" : "0.85",
         "1361732399000" : "0.85",
         "1361735999000" : "0.85",
         "1361739599000" : "0.85",
         "1361743199000" : "0.85",
         "1361746799000" : "0.85",
         "1361750399000" : "0.85",
         "1361753999000" : "0.86",
         "1361757599000" : "0.86",
         "1361761199000" : "0.87",
         "1361764799000" : "0.92",
         "1361768399000" : "0.91",
         "1361771999000" : "0.87",
         "1361775599000" : "0.87",
         "1361779199000" : "0.90",
         "1361782799000" : "0.88",
         "1361786399000" : "0.88",
         "1361789999000" : "0.87",
         "1361793599000" : "0.87",
         "1361797199000" : "0.86",
         "1361800799000" : "0.85",
         "1361804399000" : "0.86",
         "1361807999000" : "0.86",
         "1361811599000" : "0.86",
         "1361815199000" : "0.86",
         "1361818799000" : "0.87",
         "1361822399000" : "0.89",
         "1361825999000" : "0.96",
         "1361829599000" : "0.96",
         "1361833199000" : "0.96",
         "1361836799000" : "0.96",
         "1361840399000" : "0.96",
         "1361843999000" : "0.96",
         "1361847599000" : "0.95",
         "1361851199000" : "0.95",
         "1361854799000" : "0.94",
         "1361858399000" : "0.93",
         "1361861999000" : "0.93",
         "1361865599000" : "0.95",
         "1361869199000" : "0.95",
         "1361872799000" : "0.92",
         "1361876399000" : "0.89",
         "1361879999000" : "0.88",
         "1361883599000" : "0.88",
         "1361887199000" : "0.86",
         "1361890799000" : "0.86",
         "1361894399000" : "0.86",
         "1361897999000" : "0.85",
         "1361901599000" : "0.85",
         "1361905199000" : "0.84",
         "1361908799000" : "0.84",
         "1361912399000" : "0.83",
         "1361915999000" : "0.85",
         "1361919599000" : "0.86",
         "1361923199000" : "0.84",
         "1361926799000" : "0.85",
         "1361930399000" : "0.86",
         "1361933999000" : "0.85",
         "1361937599000" : "0.86",
         "1361941199000" : "0.84",
         "1361944799000" : "0.84",
         "1361948399000" : "0.82",
         "1361951999000" : "0.81",
         "1361955599000" : "0.81",
         "1361959199000" : "0.80",
         "1361962799000" : "0.80",
         "1361966399000" : "0.80",
         "1361969999000" : "0.80",
         "1361973599000" : "0.80",
         "1361977199000" : "0.80",
         "1361980799000" : "0.80",
         "1361984399000" : "0.80",
         "1361987999000" : "0.81",
         "1361991599000" : "0.83",
         "1361995199000" : "0.87",
         "1361998799000" : "0.84",
         "1362002399000" : "0.82",
         "1362005999000" : "0.89",
         "1362009599000" : "0.88",
         "1362013199000" : "0.84",
         "1362016799000" : "0.83",
         "1362020399000" : "0.83",
         "1362023999000" : "0.83",
         "1362027599000" : "0.83",
         "1362031199000" : "0.82",
         "1362034799000" : "0.83",
         "1362038399000" : "0.84",
         "1362041999000" : "0.83",
         "1362045599000" : "0.83",
         "1362049199000" : "0.84",
         "1362052799000" : "0.85",
         "1362056399000" : "0.85",
         "1362059999000" : "0.85",
         "1362063599000" : "0.85",
         "1362067199000" : "0.83",
         "1362070799000" : "0.84",
         "1362074399000" : "0.83",
         "1362077999000" : "0.86",
         "1362081599000" : "0.89",
         "1362085199000" : "0.89",
         "1362088799000" : "0.91",
         "1362092399000" : "0.90",
         "1362095999000" : "0.89",
         "1362099599000" : "0.89",
         "1362103199000" : "0.91",
         "1362106799000" : "0.92",
         "1362110399000" : "0.92",
         "1362113999000" : "0.92",
         "1362117599000" : "0.92",
         "1362121199000" : "0.92",
         "1362124799000" : "0.92",
         "1362128399000" : "0.92",
         "1362131999000" : "0.92",
         "1362135599000" : "0.91",
         "1362139199000" : "0.91",
         "1362142799000" : "0.92",
         "1362146399000" : "0.93",
         "1362149999000" : "0.92",
         "1362153599000" : "0.92",
         "1362157199000" : "0.92",
         "1362160799000" : "0.93",
         "1362164399000" : "0.96",
         "1362167999000" : "0.94",
         "1362171599000" : "0.92",
         "1362175199000" : "0.92",
         "1362178799000" : "0.95",
         "1362182399000" : "0.96",
         "1362185999000" : "0.95",
         "1362189599000" : "0.92",
         "1362193199000" : "0.91",
         "1362196799000" : "0.90",
         "1362200399000" : "0.91",
         "1362203999000" : "0.92",
         "1362207599000" : "0.92",
         "1362211199000" : "0.91",
         "1362214799000" : "0.90",
         "1362218399000" : "0.90",
         "1362221999000" : "0.90",
         "1362225599000" : "0.91",
         "1362229199000" : "0.91",
         "1362232799000" : "0.91",
         "1362236399000" : "0.91",
         "1362239999000" : "0.91",
         "1362243599000" : "0.91",
         "1362247199000" : "0.91",
         "1362250799000" : "0.91",
         "1362254399000" : "0.91",
         "1362257999000" : "0.91",
         "1362261599000" : "0.91",
         "1362265199000" : "0.91",
         "1362268799000" : "0.91",
         "1362272399000" : "0.91",
         "1362275999000" : "0.91",
         "1362279599000" : "0.90",
         "1362283199000" : "0.90",
         "1362286799000" : "0.89",
         "1362290399000" : "0.89",
         "1362293999000" : "0.92",
         "1362297599000" : "0.95",
         "1362301199000" : "0.95",
         "1362304799000" : "0.95",
         "1362308399000" : "0.95",
         "1362311999000" : "0.95",
         "1362315599000" : "0.95",
         "1362319199000" : "0.95",
         "1362322799000" : "0.94",
         "1362326399000" : "0.94",
         "1362329999000" : "0.95",
         "1362333599000" : "0.95",
         "1362337199000" : "0.95",
         "1362340799000" : "0.95",
         "1362344399000" : "0.94",
         "1362347999000" : "0.93",
         "1362351599000" : "0.93",
         "1362355199000" : "0.93",
         "1362358799000" : "0.93",
         "1362362399000" : "0.93",
         "1362365999000" : "0.93",
         "1362369599000" : "0.93",
         "1362373199000" : "0.93",
         "1362376799000" : "0.93",
         "1362380399000" : "0.93",
         "1362383999000" : "0.93",
         "1362387599000" : "0.95",
         "1362391199000" : "0.95",
         "1362394799000" : "0.95",
         "1362398399000" : "0.95",
         "1362401999000" : "0.96",
         "1362405599000" : "0.96",
         "1362409199000" : "0.95",
         "1362412799000" : "0.96",
         "1362416399000" : "0.96",
         "1362419999000" : "0.95",
         "1362423599000" : "0.95",
         "1362427199000" : "0.91",
         "1362430799000" : "0.88",
         "1362434399000" : "0.84",
         "1362437999000" : "0.85",
         "1362441599000" : "0.84",
         "1362445199000" : "0.85",
         "1362448799000" : "0.93",
         "1362452399000" : "0.94",
         "1362455999000" : "0.95",
         "1362459599000" : "0.94",
         "1362463199000" : "0.95",
         "1362466799000" : "0.94",
         "1362470399000" : "0.94",
         "1362473999000" : "0.93",
         "1362477599000" : "0.95",
         "1362481199000" : "0.95",
         "1362484799000" : "0.94",
         "1362488399000" : "0.93",
         "1362491999000" : "0.91",
         "1362495599000" : "0.89",
         "1362499199000" : "0.89",
         "1362502799000" : "0.93",
         "1362506399000" : "0.94",
         "1362509999000" : "0.92",
         "1362513599000" : "0.92",
         "1362517199000" : "0.93",
         "1362520799000" : "0.93",
         "1362524399000" : "0.93",
         "1362527999000" : "0.94",
         "1362531599000" : "0.95",
         "1362535199000" : "0.95",
         "1362538799000" : "0.95",
         "1362542399000" : "0.95",
         "1362545999000" : "0.95",
         "1362549599000" : "0.94",
         "1362553199000" : "0.93",
         "1362556799000" : "0.91",
         "1362560399000" : "0.88",
         "1362563999000" : "0.87",
         "1362567599000" : "0.87",
         "1362571199000" : "0.86",
         "1362574799000" : "0.86",
         "1362578399000" : "0.85",
         "1362581999000" : "0.84",
         "1362585599000" : "0.85",
         "1362589199000" : "0.87",
         "1362592799000" : "0.88",
         "1362596399000" : "0.88",
         "1362599999000" : "0.89",
         "1362603599000" : "0.90",
         "1362607199000" : "0.92",
         "1362610799000" : "0.92",
         "1362614399000" : "0.90",
         "1362617999000" : "0.90",
         "1362621599000" : "0.93",
         "1362625199000" : "0.94",
         "1362628799000" : "0.93",
         "1362632399000" : "0.91",
         "1362635999000" : "0.92",
         "1362639599000" : "0.92",
         "1362643199000" : "0.92",
         "1362646799000" : "0.91",
         "1362650399000" : "0.92",
         "1362653999000" : "0.94",
         "1362657599000" : "0.93",
         "1362661199000" : "0.94",
         "1362664799000" : "0.95",
         "1362668399000" : "0.95",
         "1362671999000" : "0.95",
         "1362675599000" : "0.95",
         "1362679199000" : "0.94",
         "1362682799000" : "0.95",
         "1362686399000" : "0.95",
         "1362689999000" : "0.93",
         "1362693599000" : "0.91",
         "1362697199000" : "0.91",
         "1362700799000" : "0.91",
         "1362704399000" : "0.91",
         "1362707999000" : "0.92",
         "1362711599000" : "0.92",
         "1362715199000" : "0.92",
         "1362718799000" : "0.92",
         "1362722399000" : "0.92",
         "1362725999000" : "0.92",
         "1362729599000" : "0.92",
         "1362733199000" : "0.92",
         "1362736799000" : "0.91",
         "1362740399000" : "0.91",
         "1362743999000" : "0.90",
         "1362747599000" : "0.90",
         "1362751199000" : "0.89",
         "1362754799000" : "0.88",
         "1362758399000" : "0.88",
         "1362761999000" : "0.88",
         "1362765599000" : "0.89",
         "1362769199000" : "0.91",
         "1362772799000" : "0.92",
         "1362776399000" : "0.93",
         "1362779999000" : "0.92",
         "1362783599000" : "0.90",
         "1362787199000" : "0.89",
         "1362790799000" : "0.89",
         "1362794399000" : "0.92",
         "1362797999000" : "0.92",
         "1362801599000" : "0.89",
         "1362805199000" : "0.85",
         "1362808799000" : "0.80",
         "1362812399000" : "0.87",
         "1362815999000" : "0.89",
         "1362819599000" : "0.88",
         "1362823199000" : "0.83",
         "1362826799000" : "0.76",
         "1362830399000" : "0.74",
         "1362833999000" : "0.75",
         "1362837599000" : "0.74",
         "1362841199000" : "0.73",
         "1362844799000" : "0.83",
         "1362848399000" : "0.90",
         "1362851999000" : "0.90",
         "1362855599000" : "0.91",
         "1362859199000" : "0.86",
         "1362862799000" : "0.84",
         "1362866399000" : "0.81",
         "1362869999000" : "0.77",
         "1362873599000" : "0.74",
         "1362877199000" : "0.73",
         "1362880799000" : "0.73",
         "1362884399000" : "0.73",
         "1362887999000" : "0.73",
         "1362891599000" : "0.72"
      },
      "host" : "hostb",
      "last_update" : "2013-03-09 21:03:23",
      "last_update_ms" : 1362891803000
   }
]
EOF

	my $accString = "{";
	foreach (@myClusters) {
		$accString .= " \"$_\" : 1,";
	}
	$accString =~ s/,$//;
	$accString .= "}";

	my $content=<<EOF;

{
   "accessibility" : $accString,
   "data" :  $out
}
EOF

	return $content;
}

1;
